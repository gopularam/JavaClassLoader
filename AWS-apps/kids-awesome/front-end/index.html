<html>
    <head>
    </head>
    <body style="background-color:powderblue;">  
        <h1> Kids App! Welcome</h1>
        <h1> All User list</h1>
        <div id="usersdiv">
            <table id="users" border=1>
                <thead><th>Kid's Name</th><th>Join Date</th><th>Message</th></thead>
            </table>
        </div>
        <table>
            <tr><td><button type="button" id="reloadbutton">Reload Page</button></td>
                <td><button type="button" id="removebutton">Remove User</button></td>
                <td><button type="button" id="updatebutton">Update User</button></td>
            </tr>
        </table>
        <h1> Add New Kids-App User</h1> 
        <form>
                <table border=1> 

            <tr><td>UserID:</td><td><input id="userid"  value="htmltest"/></td></tr>
            <tr><td>Message:</td><td><input id="message" value="htmltest"/></td></tr>
            <tr><td>Join Date:</td><td><input id="joindate"  value="11"/></td></tr>
            <tr><td><button type="button" id="submitbutton">Submit Details</button></td><td></td></tr>
        </form>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
        <script type="text/javascript">
            var API_URL="https://tkecvrgthb.execute-api.us-east-1.amazonaws.com/prod/users";
            $(document).ready(function(){
                $.ajax({
                    type:'GET',
                    url: API_URL,
                    success: function(data) {
                        data.Items.forEach(function(userlistitem) {
                            $('#users').append('<tr><td>'+userlistitem.userid+'</td><td>'+userlistitem.joindate+'</td><td>'+userlistitem.message+'</td><tr>')
                        })
                        console.log("GET3 success");
                    }
                });
                $("#submitbutton").on('click', function(){
                    // send ajax
                    console.log("POST223:"+$("#message").val());

                    $.ajax({
                        url: API_URL,
                        type : "POST",
                        contentType: "application/json; charset=utf-8",
                        dataType : 'json', // data type
                        data : JSON.stringify({
                            "userid": $("#userid").val(),
                            "joindate":$("#joindate").val(),
                            "message":$("#message").val()
                            }),
                        success : function(result) {
                            console.log("POST223: SUCCESS: "+result)
                        },
                        error: function(xhr, resp, text) {
                            console.log(xhr, resp, text);
                        }
                    })
                });


                $("#removebutton").on('click', function(){
                    console.log("Remove request placed");
                    location.reload();
                    console.log("Remove completed");
                });

                $("#updatebutton").on('click', function(){
                    console.log("Update request placed");
                    console.log("Update completed");
                });

                $("#reloadbutton").on('click', function(){
                    console.log("Reload request placed");
                    location.reload();
                    console.log("Reload completed");
                });

            });

        </script>
   </body>
</html>